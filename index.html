
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="jquery.form.min.js"></script>
  <script type="text/javascript" src="utils.js"></script>
  <script type="text/javascript" src="file_loader.js"></script>
  <script type="text/javascript" src="md5.min.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="primer_css.css">
  <title>WSI Loader</title>
  <meta charset="UTF-8">
</head>

<body data-color-mode="auto" data-light-theme="light" data-dark-theme="dark_dimmed" >

<div id="import">

  <p>Select folder with .mrxs files and upload it here. You will not see files in the file browser, just upload the root folder.
  By clicking on 'Upload' you start uploading the files and processing them. This can be done repeatedly to retry with failed files,
  it is a good idea to wait for the current session to finish though before doing so. By selecting 'Monitor' the provided files
  will be only checked for presence and progress/status.</p>

  <div class="p-2">

    <label for="file-drag-drop" class="drop-container">
      <span class="drop-title">Click to upload or drag&drop</span>
      <input type="file" id="file-drag-drop" name="dir_upload[]" webkitdirectory multiple required/>
    </label>

  </div>
  <br>
  <p>
    <button id="start-upload" class="btn btn-primary"><i class="fa fa-upload"></i> Upload</button> &nbsp;&nbsp;
    <button id="start-monitor" class="btn btn-primary"><i class="fa fa-upload"></i> Monitor</button> &emsp; &emsp;

    <button id="remove-upload" class="btn btn-primary"><i class="fa fa-upload"></i> Delete all uploaded</button> &nbsp;

  </p>
</div>

<div id="progress-error" class="m-3"></div>
<div id="progress"></div>

<div id="analysis" class="mt-3" style="display: none;">
  <br><br>
  <h2 class="f2-light">Analysis </h2>
  <div id="analysis-message" class="m-3 border-0 rounded-2"></div>
  <br>
  <p>You can run analysis here: only one job session can be running at the time. Use <i>request id</i> for file with the same request id to be analysed one by one.
  The progress is shown by the running monitoring above. Note though, that the analysis might run also for files not displayed here, if there are some non-processed
    files with the same request id.
  </p>
  <input type="text" class="form-control" id="request-analysis" name="request" placeholder="Request ID common to all files to process."/>
  <input type="submit" id="send-one-file-analysis" name="command" value="Run analysis" class="form-control"/>

  <br><br>
  <p>Run analysis for all the files uploaded.</p>
  <input type="submit" id="send-all-analysis" name="command" value="Run for all files" class="form-control"/>
</div>

<pre id="code" class="code mt-3"></pre>


<form action="server/index.php" style="visibility: hidden; opacity: 0" method="post" id="uploader" enctype="multipart/form-data">
  <input type="file" id="file-uploader" name="uploadedFile"/>
  <input type="hidden" id="biopsy-uploader" name="biopsy"/>
  <input type="hidden" id="year-uploader" name="year"/>
  <input type="hidden" id="meta-uploader" name="meta"/>
  <input type="hidden" id="checksum-uploader" name="meta"/>

  <input type="hidden" id="filename-uploader" name="fileName"/>
  <input type="submit" id="send-one-file" name="command" value=""/>
</form>

</body>
</html>

